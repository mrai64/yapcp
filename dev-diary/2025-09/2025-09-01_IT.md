# Diario dello sviluppatore, data 1 settembre 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

## Verify email

ieri ho riformato la tabella users che aveva l'id non in formato uuid.
Allo stesso tempo ho anche verificato che mandando l'utente 10
nel pannello quadro di controllo dashboard la mail parte e la verifica funziona.

Quindi? Quindi devo attivare il servizio di verifica.
Sul sito [Laravel.io](https://laravel.io/forum/verification-email-not-being-sent-to-user-after-registration) un suggerimento, lo seguo sperando basti.

1. Aggiungere una cosa alla definizione della [classe User](../../app/Models/User.php)
1. Aggiungere una cosa alla lista dei router [web.php](../../routes/web.php)
1. Official Doc <https://laravel.com/docs/12.x/verification>

Richiede l'installazione di un package, ma io il package ce l'ho gi√† e
non ho i mezzi per sfoltire i package inutilizzati, per ora.
Provo a fare senza il punto 2.

Funziona **commit**

## LARAVEL SU MAMP

- cambiato sui parametri di mamp la cartella base
- cliccato su public, sparisce /public dall'url e funziona.

## User Contact

C'√® da preparare una modifica, quando viene creato uno User nuovo
dev'essere creata allo stesso momento una scheda User_contact,
in cui ci sia gi√† impostato un uuid e un indirizzo email, che non
saranno modificabili in seguito.

- [x] Model
- [x] Factory
- [x] Seeder
- [ ] Add form no, ci sar√† un inserimento
- [ ] Modify s√¨,
  con upload della foto che andr√† in \country_id\prefisso\user_id_timestamp.png
- [ ] Remove
- [ ] Listed

Dashboard con user id, funziona:

```php
  <a href="/user/contact/{{ Auth::id() }}">
  {{ __("Update your personal Contact info") }}
  </a>
```

### Factory e seeder, uno alla volta per carit√†

Momento, non √® che non funziona, funziona: solo che funziona uno per volta.
E per un seeder √® un controsenso. Qual'√® il punto del problema?
Questa se non si √® ancora capito, √® una tabella child che aggiunge
dati alla tabella users. Ma non come per le altre con un rapporto 1:n,
questa se c'√® √® una e quella. Tanto che avevo pensato e magari
lo far√≤, di fare la userContact->create() dentro o dopo la user->create()
all'interno del controller registration. O di quello della verifica email.
Insomma, quando uno arriva al suo Quadro di controllo 'en:Dashboard'
sono gi√† impostati email e first_name. Perch√© user_id o √® quello o √® quello.

Passo quindi a creare il modulo per il modify.
Listed: Country_id asc, last_name asc, first_name asc, (nick_name asc), created_at asc.

Mappa e controller:

```php
$ php artisan livewire:make User/Contact/Modify
  COMPONENT CREATED  ü§ô

  CLASS: app/Livewire/User/Contact/Modify.php
  VIEW:  resources/views/livewire/user/contact/modify.blade.php
```

Route in [web.php](../../routes/web.php)

```php
Route::get(   '/user/contact/modify/{id}', User\Contact\Modify::class, ['id'])->name('user-contact-modify');
```

E niente, insiste a darmi errore che la class non esiste, anche dopo che mi ha proposto lui la `::class` a completamento.  
**Risolto**: Bisogna aggiungere in testa una `use`, in particolare "basta"  

```php
use App\Livewire\User;
```

Per sbrogliare la matassa e consentire a Laravel di rintracciare la classe giusta.

Parecchi altri intoppi, dopo, funziona.
Se la tabella figlio ha id numerico e devi fare match con user_id
stringa, il parametro che arriva dev'essere con un nome diverso da $id, anche se √® il parametro di input di una funzione.
C'√® che cambiando il parametro di input in $uid, che non √® $id e non √® $user_id, ha la sua indipendenza e arriva dritto alla funzione mount() dove √® atteso come parametro di input.
Si usa uid nella route, e uid nella funzione mount().
Altri intoppi sulla lettura dei dati, per cui serve in qualche caso
assegnare uno [0] in fondo alla sequenza dei comandi per avere un valore scalare al posto di una struttura array. Ma non sempre.

Risolto, **commit** e buona notte.
