# Diario dello sviluppatore, data 7 settembre 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

## Contest/Add

Un problema sono le regole di federazione. Quando una federazione regola il proprio
mondo di concorsi definisce delle regole mediamente di buon senso basate sull'esperienza.
Quindi la prima cosa che penso sia inserire queste regole nella validazione dei dati.
Tuttavia i concorsi no saranno "sotto al patrocinio" di una sola federazione
e quindi andranno verificati sulla base di tutte, con una avvertenza:
i dati vanno comunque registrati, vanno segnalati i casi di non conformità.

Date: vanno confrontate le date data1 >= data2 >= data3 ecc. Regola di validazione: after

```php
use Illuminate\Validation\Rule;

'start_date' => [
    'required',
    Rule::date()->afterOrEqual(today()->addDays(7)),
],
```

Cominciamo con la costruzione 
[del modulo](/resources/views/livewire/contest/add.blade.php) e del suo 
[controller class](/app/Livewire/Contest/Add.php),
con un occhio alla [definizione della tabella](/database/migrations/2025_09_06_155712_create_contests_table.php).

`use Illuminate\Support\Facades\Validator;`  
Costruisco un array `$validation_errors` e lo popolo con `'campo' => 'messaggio'`,  
e a fine verifica testo se il vettore è pieno faccio redirect con 
[Vedi Validation rule](https://laravel.com/docs/12.x/validation).  
I messaggi di errore vanno tradotti nel file [lang/xx/validation.php](/lang/it/validation.php).  

### Manca un campo, lang_code

Name_en fornisce un campo per il nome internazionale del concorso, name_local
il nome nella lingua locale, ma... Qual'è la lingua locale? Se è uno dei
linguaggi che richiedono RTL? Aggiungo la colonna lang_local (prima l'oggetto poi il
complemento oggetto) dopo name_local, valore default 'en'.

<http://127.0.0.1:8000/contest/add/2ae1f23f-1176-46fb-8d88-e34b9c88868a>  

Il modulo funziona e usando il campo input tipo datetime-local
la data viene esposta nel formato italiano con tanto di aiuto
alla compilazione come speravo fosse.

Anche se manca la parte di caricamento del marchio concorso, funziona **commit**

TODO Manca la parte di validator per le date, e per altro.

Va trovato un modo per *aggiungere le aggiunte* delle regole che le federazioni
aggiungono all regole base. Per esempio FIAF e FIAP consentono la partecipazione
di immagini più vecchie di 3 anni ma non sono valide per la statistica concorsi.

Va trovato un modo per aggiungere campi come per esempio il codice tessera
e il codice fiscale dei concorrenti italiani ai concorsi patrocinati da FIAF.
E se la FIAF di Monaco vuole le stesse cose ma il codice fiscale di Monaco
è diverso da quello italiano (*certo*, non *possibile*).
