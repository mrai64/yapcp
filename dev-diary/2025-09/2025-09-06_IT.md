# Diario dello sviluppatore, data 6 settembre 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

## Lang \[la non tabella]

Definisco una public const nel Model, quindi quando devo esporre il dato,
presumo nella scheda contatti, posso dare una option list chiamando l'elenco delle
lingue. Potrei mettere l'elenco completo ricavandolo dalla pagina del w3c,
però se manca il file di traduzione, a che pro?

## Timezones

Questo potrebbe anche diventare un enum, ma preferisco che sia un array
const definito nel suo Model. I dati dell'elenco li prelevo dalla lista
dei timezones accettati da php 8.4 presenti nel sito di php
alla pagina [List of supported Timezones](https://www.php.net/manual/en/timezones.php)

D.: Perché timezones (che sono oltre 400) in array e country (che sono
meno di 250) in table?

R.: Country Paesi Nazioni non si porta dietro solo un dato, c'è il country_code, la denominazione
del paese, e un emoji che rappresenta la bandiera del paese. NON si porta dietro il prefisso
telefonico però potrebbe. Sul sito di <IBAN.com> ci sono, e andrebbero intrecciati con le regole
per il controllo dei numeri, ma serve? [List of country calling](./2025-09-06%20_%20iban%20com%20_%20List%20of%20country%20calling%20telephone%20number%20prefixes.pdf) in teoria si possono memorizzare il prefisso e la regola integer|min-digit:N|max-digit:M come stringa per poi passarla alla funzione rules() di Validation.

* ✅ Creato Model LangList, compilato elenco e funzioni
* ✅ Creato model TimezoneList, compilato elenco e funzioni
* ✅ Creato migration per aggiungere le colonne alla tabella user_contacts
* ⬜️ Modifica al pannello UserContact\Add, UserContact\Modify

D.: Finita anche questa *distrazione*, cosa va fatto **urgentemente**?  
R.: Definire i **concorsi**,  
e i loro dati e calendari,  
con le Sezioni_dei_concorsi,  
con i Premi_dei_concorsi,  
con le Giurie dei concorsi...

* utenti user per accesso alla piattaforma, ci sono
* federazioni ci sono
* federazioni / sezioni_previste_dalle_federazioni ci sono
* organizzazioni o circoli organizzatori di concorsi ci sono
* concorsi / 1 **`Contest`** il nome del concorso,  
il calendario (anche il circuito ha una sua entry come i concorsi),  
le federazioni sponsor / di riferimento
* concorsi / 2 **`ContestSection`** le sezioni che fanno parte dei concorsi,  
soggette a federazioni sponsor o libere
* concorsi / 3 **`ContestJury`** sezione per sezione l'elenco di persone che compongono la giuria
* concorsi / 4 **`ContestAward`** i premi che sono di concorso - circuito, e di sezione con spazio per autore od opera vincitrice
* concorsi / 5 **`ContestWork`** le opere partecipanti sezione per sezione con spazio per ammessa / non ammessa
* concorsi / 6 **`ContestJuryshow`** la sequenza di presentazione delle opere in giuria

##  Contest 1

Questo Model impiega un uuid per la definizione del concorso

1. id contest.id
1. contest.name
1. contest.country_id
1. organization_id  
Quando più organizzazioni sono coinvolte per esempio in un circuito,
una di queste viene incaricata di fare da capofila e organizza il circuito.
1. contact info for participate  
informazioni sulla segreteria, chi contattare,
telefono posta whatsapp altro
1. is_circuit Y/N, default N  
Se si tratta di un circuito impostarlo a Y,  
non è obbligatorio che tutti i concorsi del circuito siano
impostati con una Y, ma il circuito viene a sua volta registrato
in questa tabella ed è l'unico ad avere l'obbligo di Y,
mentre tutti i concorsi a circuito devono avere l'id del circuito nel campo successivo.
1. circuit_id  
  Tutti i concorsi che aderiscono a un circuito devono
  avere in questo campo il contests.id del circuito,
  è ammesso che anche l circuito abbia il suo stesso id,
  in questo campo, ma non va assegnato in creazione, solo in modifica.
1. federation_list.  
  Ovvero, se ci sono federazioni che patrocinano o sponsorizzano
1. url_1 rule_website
1. url_2 participants list
1. url_3 award and admit result page
1. url_4 catalogue
1. day_1 datetime publicly begin
1. day_2 closing date
1. day_3 start jury works
1. day_4 closing jury works
1. day_5 publicly communication result
1. day_6 award ceremony
1. contact info for award ceremony  
ceremony site,  
online broadcast platform and so on
1. day_7 closing date for catalogue presentation
1. day_8 closing date for awards postal send

* [x] migration

### Il giro da fare

* Mario rossi si collega alla piattaforma
* Nel Quadro di controllo risulta che Mario Rossi fa parte / rappresenta
  l'organizzazione Circolo Fotografico ScattoAnch'ioNoTuNo di Milano Appenninica.
* Sotto al link di rappresentanza può avere la lista dei concorsi
  organizzati e aggiungerne uno.  
  Così l'id dell'organizzazione viene messo a disposizione
  di contest.add.blade e procedere all'inserimento del concorso e del circuito
* Per la gestione del concorso poi sarà l'organizzazione in capo al concorso e ai concorsi in circuito, pertanto saranno abilitati:
  1. ogni autore a vedere le proprie opere in quanto autori,  
  1. gli user che sono qualificati come giurati del concorso vedranno tutte le foto
  che sono nella sezione della loro giuria, e i voti assegnati da loro direttamente
  1. gli user che sono associati all'organizzazione potranno vedere le foto
  del loro concorso, e per i circuiti anche quelle degli altri concorsi in circuito.

### Caso campione

Concorso: Obiettivo Murlo 2025 XIX Edizione FIAF 2025M26
Sponsor patrocinatore: FIAF
Organizzazione: Socio FIAF 2500 – ASS. PRO LOCO DI MURLO APS-SEZ.FOTOGRAFIA
Referente per l'organizzazione: Sara Cipriani - Segretaria della Sezione Fotografia

```text
Associazione Pro Loco di Murlo APS / ITA
email: obiettivomurlo@prolocomurlo.it
website: https://www.prolocomurlo.it/
uuid: 2ae1f23f-1176-46fb-8d88-e34b9c88868a 
```

Adesso serve iniziare il pannello Contest/Add che riceva in input un organization_id, e poi chieda i dati minimi obbligatori, sarà da divertirsi la funzione rule(), come lo passo indietro un messaggio di errore?  
`use Illuminate\Support\Facades\Validator;`  
Costruisco un array `$validation_errors` e lo popolo con `'campo' => 'messaggio'`,  
e a fine verifica testo se il vettore è pieno faccio redirect con 
[Vedi Validation rule](https://laravel.com/docs/12.x/validation).  
I messaggi di errore vanno tradotti nel file [lang/xx/validation.php](/lang/it/validation.php).  

### Manca un campo, lang_code

Name_en fornisce un campo per il nome internazionale del concorso, name_local
il nome nella lingua locale, ma... Qual'è la lingua locale? Se è uno dei
linguaggi che richiedono RTL? Aggiungo la colonna lang_local (prima l'oggetto poi il
complemento oggetto) dopo name_local, valore default 'en'.

http://127.0.0.1:8000/contest/add/2ae1f23f-1176-46fb-8d88-e34b9c88868a  

Il modulo funziona e usando il campo input tipo datetime-local
la data viene esposta nel formato italiano con tanto di aiuto
alla compilazione come speravo fosse.

Anche se manca la parte di caricamento del marchio concorso, funziona **commit**
