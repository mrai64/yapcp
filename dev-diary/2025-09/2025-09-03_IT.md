# Diario dello sviluppatore, data 3 settembre 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

## Estensioni

La tabella user_contacts di fatto Ã¨ una tabella figlia di users, ma non nel senso solito di 1:N,
i record quando ci sono sono figli unici. i dati aggiuntivi richiesti dalla federazione fiaf,
che riguardano numero tessera e codice fiscale solo oer gli italiani, possono essere scritti con
lo stesso user_id in una tabella user_contacts_fiaf, che verrÃ  popolata dai concorsi
in cui compare tra gli sponsor la sigla della fiaf. anche il modello di registrazione potrÃ 
prevedere qualcosa a riguardo.

Moduli: come i" modulo di user_contact ha dei contenuti vincolati alla presenza di campi valorizzati,
per il modulo di contatto fornisce il country code e in seguito un altro modulo puÃ² chiedere
l'associazione di riferimento, e sulla base di quei dati poi chiedere se mancano di integrare i dati
aggiuntivi richiesti dalla federazione. ogni volta che ci si iscriverÃ  a un concorso
prima della conferma e il passaggio alla selezione delle opere saranno mostrati i dati forniti al concorso.

### Works / continua

Dovendo definire dove va pescata la foto, e dove va messa mi accorgo
che la definizione del path inserita in Usercontact/modify dev'essere
replicata qui e mantenuta sincronizzata, cambiarla a posteriori sarÃ  un casino
e allo stesso tempo non devo pensare al concorso del circolo ma a una piattaforma
globale, in grande. decido quindi non su User ma su UserContact
di aggiungere una public function che mi restituisca il path e che sia una per tutti.
Serve quindi passare da UserContact perchÃ© la divisione sarÃ  fatta
per country code, cognome, nome aggiungendo anche un pezzetto dello user_id,
o forse tutto intero chissene. Se ci sono sette Mario Rossi italiani avranno ciascuno il
suo cassetto. Lo battezzo photo_box e non archive perchÃ© prevedo le foto non saranno un
vero archivio personale ma una selezione del proprio archivio personale per partecipare
ai concorsi.

**WorksLog** prevedo un registro delle opere per la partecipazione ai concorsi,
con il risultato: non ammessa / ammessa / premiata. Potrebbe essere una "vista"
del tabellone Partecipanti.

### Works - factory stitico

La creazione di un record mi sta portando via le ore. La libreria
Faker a disposizione punta a un sito che ha chiuso e l'autore della
libreria ci ha messo una pietra sopra, non l'ha mai sostituita.
Ho inserito un record mettendo un indirizzo url, ma no va bene.
Serve registrare una immagine nella cartella photo_box;
quindi serve memorizzare nel campo il path e nomefile;
quindi salvare il record con lo uuid() usato per il nome del file.

La faccio troppo complicata? A mio parere no, questo serve.

Facciamo finta di aver finito migration > model > factory > seeder.

Step dopo? Mostrare al signor user che puÃ² caricare N immagini dalla sua libreria nella sua photo_box, step dopo mostrargli una grid di miniature
affiancate da title_en, title_local, lato_lungo, Lato corto.
Consentirgli di modificare alcuni dati e cancellare le immagini.

Upload Ã¨ parola riservata, niente WorkUpload, Store? Store in your
photo_box sounds good?

```php
$ php artisan livewire:make Work.Store
 COMPONENT CREATED  ğŸ¤™

CLASS: app/Livewire/Work/Store.php
VIEW:  resources/views/livewire/work/store.blade.php

$ php artisan livewire:make Work.Listed
 COMPONENT CREATED  ğŸ¤™

CLASS: app/Livewire/Work/Listed.php
VIEW:  resources/views/livewire/work/listed.blade.php
```

### Work/Listed

Preparata la pagina per esporre i dati, mi viene che dalle query non esce
quello che mi aspetto, ci aggiungo get() ma ancora ottengo
un array di un solo elemento e i campi sono associati.

**NOTA** ho aggiunto una colonna *flag_code* alla tabella countries,
bastano una ventina di byte in questa ci metto gli unicode che servono a esporre la bandiera del paese,
&#127470;&#127481; > ğŸ‡®ğŸ‡¹ ma potrei anche mettere direttamente la bandiera
un po' per volta le aggiorno tutte da <https://www.alt-codes.net/flags>.
Anzi no, basta usare la tastiera emoji del mac, nome nazione appare la bandiera copia incolla.

A sera arrivo a vedere uan prima pagina di lista, ma devo
aggiungere la gestione del pari / dispari per alternare le righe della
tabella. 

E' da completare, ma funziona: **commit**.
