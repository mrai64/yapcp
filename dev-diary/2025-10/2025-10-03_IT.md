# Diario dello sviluppatore, data 3 ottobre 2025

* [index](../index.md)
* [TDL](../TDL.md)
* [log](/storage/logs/laravel.log)
* [project](https://github.com/users/mrai64/projects/1)
* [◀️ ieri](./2025-10-02_IT.md)

## iscrizione opere a concorso

Sono rimasto alla problematica di fare un componente per ogni rigo,
per ogni work in modo da renderlo indipendente.
Questo comporta risolvere un problema che è quello di passare un solo
parametro alla funzione quando questo parametro prima era
di due elementi: il concorso (da cui l'elenco delle sezioni)
e il lavoro da proporre.

Soluzione 1: CSV, concateno separati da , contest_id e work_id
e dentro l'elemento mi vado a riprendere la lista delle sezioni
da proporre nel form. **good**

Soluzione 2: usare json_encode(), per poi usare json_decode().
Questo rende il codice più leggibile e posso passare direttamente
la section list invece che un solo contest_id. **win**

Gaudeamus! Ho inserito un lavoro partecipante al concorso e sezione,
posso inserirlo doppio?

Adesso che il record c'è devo rinfrescare la pagina per tenere conto
della modifica. Si può fare con gli eventi e i listener, imparerò.

### Nota: è come un e-commerce, molto quasi

Un e-commerce particolare, invece di fare un ordine e metterlo in carrello
si ha una propria linea di prodotti immagini che vanno nel carrello sezione del concorso.
Metafora ardita ma applicabile con gran ribaltamento di piattaforma.

### manca la section giusta

Ho aggiunto un lavoro alla sezione CL ma mi espone BN sul pulsante LEAVE.
per verifica in sql

```sql
SELECT c.name_en as contest_name
     , s.name_en as section_name
     , u.first_name
     , u.last_name
     , w.title_en
FROM `pcp_contest_participants` p
   , `pcp_contests` c
   , `pcp_contest_sections` s
   , `pcp_user_contacts` u
   , `pcp_works` w 
WHERE p.contest_id = c.id
  AND p.section_id = s.id 
  AND p.user_id = u.user_id
  AND p.work_id = w.id
  

```

E mi esce correttamente "Open C" sulla seconda colonna, quindi sbaglia chi?
Sbaglia findOrFail() che mi restituisce "una" section, mentre where() mi restituisce
"quella" section.

### Altro problema 404

Cliccando sul pulsante LEAVE prendo un 404. Devo ancora capire perché
cambiato ancora qualcosa, il contest\subscribe chiama contest\subscribe\add
e Contest\subscribe\leave che espongono i form e i dati. Prima il test di
aggiungere record con Contest\Subscribe\Add ha funzionato e adesso due
delle tre immagini cono nella sezione CL. Quando clicco sul pulsante

Azzerare e rifare

* Rifare la parte di form che prende il nome di remove e ha in input pid,
* dev'essere richiamabile sia da livewire che da route sempre con pid
* deve funzionare come se fosse da sola e uno degli altri method="DELETE"
che funzionano.

'Sto 404 a chi è? Non si capisce.

Ok, rifatto e sistemato Route(), Form e controller,
subscribe alterna Add e Remove, remove riceve $pid sia
da @livewire che da route, così che dove arriva arriva, è sempre libero.
**Adesso funziona** anche la cancellazione dal concorso.
Sono solo 3 immagini quindi prossimo step: i semafori per le regole.
Oppure la lista dei partecipanti. Non una scelta difficile, vanno fatte entrambe.


### Non si può assegnare un lavoro a più sezioni

### Non è gestibile così il caricamento di sezioni a portfolio

Per le sezioni a portfolio va indicata anche una sequenza,
che manca già a livello di tabella contest_participants.

### Esposizione dei lavori - da modificare

Occorre chiarire quali sono i lavori a concorso e quali no,
pertanto si fa una prima lista dei lavori IN contest_participants,
e quando questa è finita una lista di tutti quelli che mancano.

### Sezioni portfolio

Sono identificabili come quelle che hanno numero minimo delle opere > 0.
A queste va affiancato un campo sequenza default(0)
che va esposto a fianco del campo sezione.

### Righe di tabella - o Card

Domani pausa? Sarebbe il caso anche domenica.
