# Diario dello sviluppatore, data 4 dicembre 2025

* [index](../index.md) |
  [To Do List](../TDL.md) da svuotare e migrare in |
  [project](https://github.com/users/mrai64/projects/1) issue list

* [Route](/routes/web.php)

* [◀️ Diario di ieri](./2025-12-03_IT.md)

* run <http://yapcp.test/>
* [log](/storage/logs/laravel-2025-12-04.log) | ngnix log  `open ~/Library/Application\ Support/Herd/Log`

## Strumenti

Intanto ho risolto il problema della view, andando in mysql e facendo
la select sulla tabella contest, è andata. Per la view
l'errore è stato più parlante: L'utente specificato come defnied non esiste.
e quindo utente 'Sql1515403'@'localhost' non è 'Sql1515403'@'%'.

Creato e garantito.

```txt
mysql> select * from pcp_contests_view;
ERROR 1449 (HY000): The user specified as a definer ('Sql1515403'@'%') does not exist
mysql> create user 'Sql1515403'@'%' identified by '(...)';
Query OK, 0 rows affected, 1 warning (0,06 sec)

mysql> grant all privileges on pcpdb.* to 'Sql1515403'@'%';
Query OK, 0 rows affected (0,00 sec)

mysql> select * from pcp_contests_view;
+----------------------------------------------------------------------+-----------------------------------------------------------------------+---------------------+------------------------------------------------------------+-----------------+-----------------+-----------+--------------------------------------+--------------------------------------+--------------------------------------+--------------+
| contest_name                                                         | contest_local_name                                                    | day_2_closing       | organization_name                                          | first_name      | last_name       | role      | contest_id                           | organization_id                      | user_id                              | user_role_id |
+-----------------------------------------------
```

Risolto questo step come a sudoku pare che si sia sbloccato qualcosa
per coincidenza temporale anche sul fronte del Bad Gateway che adesso
è diventato timeout indicando anche in log che il component viene
chiamato, arriva a chiamare il rendere e poi va in timeout.

### Tabella countries completata e backup-pata

```sh
cd ~
cd Downloads
mysqldump --socket /tmp/mysql_3306.sock -u root --port=3306 pcpdb pcp_countries > pcp_countries.sql
```

Se si mette user Sql1515403 poi chiede la password, tenerla a portata di mano.

### Contest timeout

Ripartiamo dalla verifica.

1. Pagina inizio
1. Pagina dashboard utente
1. pagina dashboard organizzazione di cui fa parte utnte
1. link alla pagina di modifica scheda concorso  
timeout

Verificato in log [vedi](./2025-12-04%20laravel-2025-12-04.log). Funziona tutto e arriva al render().  
Quindi esce dal render e comincia a preparare la pagina, perché fa la richiesta della
funzione ContestSection::first_section_id, funzione che torna '' oppure un uuid.
E funziona, anche se in pratica potrei sostituirla con un count, ma invece no, devo usarla
per creare un link. Fin lì ci arriva.

[component](/app/Livewire/Contest/Modify.php)  
[blade](/resources/views/livewire/contest/modify.blade.php)  

Ficcando dei log anche nel blade vedo che arriva fino al 10. che precede lo spazio
del campo circuit_id e non espone quello dell'11. che lo segue.

Trovato anche questo: era il campo del suggerimento che usa una funzione `_()` e non `__()`.

Sistemato

### relazioni 

Mancano alcune relazioni tra le tabelle dei contest, aggiunte.
