# Diario dello sviluppatore, data 12 gennaio 2026

* [index](../index.md) |
  [project](https://github.com/users/mrai64/projects/1/views/1?filterQuery=is%3Aopen&sortedBy%5Bdirection%5D=asc&sortedBy%5BcolumnId%5D=Title) issue list |
  [To Do List](../TDL.md) svuotato  

* [Route](/routes/web.php)

* [◀️ Diario di ieri](./2026-01-11_IT.md)

* run <http://yapcp.test/>
* User Doc <http://yapcp.test/docs/1.0/> [index](/resources/docs/1.0/index.md)
* [log](/storage/logs/laravel-2026-01-12.log) | ngnix log  `open ~/Library/Application\ Support/Herd/Log`  `open ./storage/logs/`

## Today Do list

* Refactor scarico excel
* Refactor user > user_contact

## Considerazioni sulla *terza forma normale*

La tabella contest_works potrebbe arricchirsi di una colonna
`contest_works.award` che viene caricata con un trigger
quando viene aggiornata la colonna `contest_awards.winner_work_id`,
questo per "avere pronta" con la selezione dei contest_works
il valore assegnato, *individuale* per il lavoro nel concorso
e nella sezione. **Però no**  
In realtà il lavoro può essere destinatario si di un premio
di giuria ma anche di un premio del giurato. Anche questo caso non
è correttamente gestito nella piattaforma com'è ora.
Il "premio del giurato" può essere assegnato a un concorrente,
come a un lavoro tra quelli ammessi. Che a sua volta
può prendere un premio giuria. *Fare issue*

## Questione di tempo

Ancora un timeout sull'esportazione ...e non ho ancora aggiunto i dati.
Uno dei suggerimenti di Gemini è di cambiare strategia, e spesso
serve proprio per compiti come l'esportazione dati: passare dal **Jobs**,
in qualche modo che devo imparare convertire qualcosa in un job
che viene lanciato dal mio link, esce subito avvisando *"Stiamo lavorando per voi"*,
o qualcosa del genere, e quando il job è finito arriva il download del file.

Limitando il numero di record che vengono estratti a una ventina
sono riuscito a finire comunque il giro, a togliere un inutile
collegamento con la tabella contest, ma resta un punto interrogativo.
Anche quando cambio la relazione tra contest_works
e contest_awards, NON esce nessun record awards. Nessuno.
Almeno, io ho predisposto un premio al primo concorrente della lista
per vedere che esca un valore, ma niente: collection vuota.
Ho cambiato la relazione da hasOne a belongsTo, niente:
Ho cambiato la relazione da hasOne in hasMany e puf! successo MA
esce una collection ancora vuota, sempre senza elementi.

### indice su contest_work o su contest_awards

La ricerca per section_id winner_work_id non si appoggia a nessun indice,
devo quindi procedere alla creazione di un index not unique
in

```sh
$ php artisan make:migration adD_idx_to_contest_awards_table
For more details, please visit https://support.apple.com/kb/HT208050.
   INFO  Migration [database/migrations/2026_01_12_211855_ad_d_idx_to_contest_awards_table.php] created successfully.  
```

Alla fine se ne esce, ho spostato la lettura dalla relation
a un left join, e nella blade test se il campo è null espongo ''.

Per ora **commit** ma adesso imparo come spostare tutto a
JOB (anche il report fiaf 1), in modo da svincolarmi
dalla tagliola dei 30 secondi.
