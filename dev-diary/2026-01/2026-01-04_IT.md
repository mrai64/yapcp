# Diario dello sviluppatore, data 4 gennaio 2026

* [index](../index.md) |
  [project](https://github.com/users/mrai64/projects/1/views/1?filterQuery=is%3Aopen&sortedBy%5Bdirection%5D=asc&sortedBy%5BcolumnId%5D=Title) issue list |
  [To Do List](../TDL.md) svuotato  

* [Route](/routes/web.php)

* [‚óÄÔ∏è Diario di ieri](./2026-01-03_IT.md)

* run <http://yapcp.test/>
* User Doc <http://yapcp.test/docs/1.0/> [index](/resources/docs/1.0/index.md)
* [log](/storage/logs/laravel-2026-01-04.log)  | ngnix log  `open ~/Library/Application\ Support/Herd/Log`  `open ./storage/logs/`

## Today Do list

* üöß generazione report excel delle federazioni
* üöß documentazione per censimento organizzazioni e federazioni

### Documentazione funzioni

Nel [video tutorial](https://www.youtube.com/watch?v=UORMYT8Fs9Y) '4 package indispensabili'
ci sono spatie backup e un altro per risolvere le query complicate e uno per creare su tutte le funzioni le documentazioni phpdocs.

## Export Federation report as excel download [Issue #90](https://github.com/mrai64/yapcp/issues/90)

Siamo ancora agli step iniziali, adesso che lo scarico degli user funziona, e lo scarico dei partecipanti ha funzionato i prossimi step sono:

* aggiungere concorso fotografico in riga 1
* aggiungere le intestazioni nella riga 2
* ‚úÖ aggiungere i dati dalla riga 3 `startCell()`

Per i primi due punti sembra che la soluzione sia fare l'esportazione a partire non dalla nuda collection ma [da una View](https://docs.laravel-excel.com/3.1/exports/from-view.html),

```php
return view('exports.invoices', [
            'invoices' => Invoice::all()
        ]);
```

```html
  <thead>
    <tr>
        <th>Name</th>
        <th>Email</th>
    </tr>
  </thead>
  <tbody>
    @foreach($invoices as $invoice)
        <tr>
            <td>{{ $invoice->name }}</td>
            <td>{{ $invoice->email }}</td>
        </tr>
    @endforeach
  </tbody>
```

Prossimo step: definire una view per ogni report da generare  
e/o  
una view dinamica con i campi elencati in una tabella
federation_reports,  
ma gi√† si prospetta una complicazione: quante sezioni? in che forma?

Ripasso  
route > Controller > Export > Collection  
route > Controller > Export > View blade+livewire
Peraltro la view si pu√≤ anche vedere in anticipo, e va da se, √® tutto in table...

Tutto funziona, ma √® "tutto" o tutto statico, negli esempi
viene invocata la funzione ::all(), e se devo passare alla
funzione una collection complessa? E se devo passare alla
query dei parametri da dove passano?

<https://github.com/SpartnerNL/Laravel-Excel/discussions/3644>

Ma anche [chiedi a gemini](./2026-01-04_gemini_say_1.md),
il punto di leva √® in __constructor(), quello pu√≤ ricevere e preparare
i dati in $this che poi sono a disposizione in view() anche
senza passare parametri.

* Route
* Controller Fiaf1Participants
* export con i dati

Pare che **finalmente** ci siamo. il parametro dalla route passa al controller e all'export
ma √® dentro un __construct() che devo tirare fuori i dati. Peraltro la relazione
tra contest e contest_participants e tra contest_participants e user_contacts.
Adesso c'√® da metter insieme il complesso di:  

* concorso
* sezioni del concorso
* partecipanti
  * dati di contatto
  * dati di contatto aggiuntivi
  * dati di partecipazione a tutte le sezioni
  * dati di partecipazione per ciascun lavoro

alcuni sono semplici relazione tra tabelle, altri per averli a disposizione
devo creare degli array multi indice
(es. user_id, codice_sezione) da usare nei loop.
Al posto di avere i puntatori servir√† passare un array, complesso.

