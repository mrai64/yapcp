# Diario dello sviluppatore, data 20 gennaio 2026

* [index](../index.md) |
  [project](https://github.com/users/mrai64/projects/1/views/1?filterQuery=is%3Aopen&sortedBy%5Bdirection%5D=asc&sortedBy%5BcolumnId%5D=Title) Lista delle questioni

* [◀️ Diario di ieri](./2026-01-19_IT.md)

* [Route](/routes/web.php)

* run <http://yapcp.test/>

* User Doc <http://yapcp.test/docs/1.0/>  
[index](/resources/docs/1.0/index.md)
[log](/storage/logs/laravel-2026-01-20.log)  
ngnix log  `open ~/Library/Application\ Support/Herd/Log`  
`open ./storage/logs/`

* <https://dbdiagram.io/d>  
  Serve esportare da mysql la struttura e
  passarla con copia incolla al sito e
  consente di avere una documentazione
  utile a molti ambienti di sviluppo.
  importa esporta dbml
* comando per esportare  

```sh
mysqldump --socket /tmp/mysql_3306.sock -u root --port=3306 -p --no-data pcpdb > ~/Downloads/yapcp.sql
```

## Today Do list

* Revisione codice
* Documentazione

## Passare a livewire 4

[Chiedi a Gemini](./2026-01-20_gemini_say_1.md)  
[Aggiornamento ufficiale](https://livewire.laravel.com/docs/4.x/upgrading)

## Spartizione contests

Il Model di Contest è pieno zeppo di funzioni relazione, ed
è coerente con il suo ruolo centrale nell'applicazione.
per semplificare al massimo potrebbe diventare
solo una tabella id e nome e organizzatore,
(con i campi *_at)
con tutti gli altri dati in tabelle figlie.
Campi come vote_rule però non si possono mettere in calendario
e nemmeno nelle info, campi come country_id sono di fatto

* contests
  * id
  * country_id
  * name
  * organization_id
  * is_circuit
  * circuit_id
  * vote_rule
  * created_at
  * updated_at
  * deleted_at
* contest_infos
  * id
  * contest_id
  * country_id
  * contest_mark
  * chairman_info
  * promo_info (new)
  * award_ceremony_info
  * fee_info
  * url_1_rule
  * url_2_participants (person n fee status)
  * url_3_admit_awards (works)
  * url_4_catalogues
  * created_at
  * updated_at
  * deleted_at
* contest_calendar
  * id
  * contest_id
  * timezone_id
  * day_1_opening
  * day_2_closing
  * day_3_jury_opening
  * day_4_jury_closing
  * day_5_results_publication
  * day_6_award_ceremony
  * day_7_catalogues_publication
  * day_8_end_of_operation
  * created_at
  * updated_at
  * deleted_at
* contest_patronage
  * id
  * contest_id
  * federation_id
  * patronage_code

In contest_calendar la timezone_id è la timezone del php, una stringa
es. 'Europe/Rome', poi mano santa Laravel + Carbon
serve per calcolare le date a confronto con le date dell'utente.
Di fatto devo registrare tutti i calendari in base

### Che ore sono da te?

Devo aggiungere la *gestione degli orari* fatta bene alla definizione
del concorso ma anche metterla nella pagina di login dell'utente.  
[Chiedi a Gemini 2](./2026-01-20_gemini_say_2.md) - più che una domanda
un interrogatorio. E alla fine no, meglio non chiederla al login.

*Dove fare l'intervento:* Si tratta dei punti in cui
sono gestiti i dati del concorso, quindi dove i dati
sono esposti.

---

## users e user_contact

1. esiste un trigger che quando viene creato un nuovo record in users
viene creato un nuovo record in user_contacts.
1. esiste un trigger che quando viene modificato un record in
user_contacts, l'indirizzo email viene ribaltato in tabella users.
1. user_contacts.id è un bigint unsigned
1. users.id è uuid
1. relazione user_contact.user_id > users.id

Però users NON ha relazioni con user_contacts
dovrebbe averla basata sul campo email e/o sul campo id - user_id

* creare un indice unique per la tabella user_contacts
* cancellare il trigger che alla modifica di users aggiorna la mail di user
* creare un legame tra la tabella users e la tabella user_contacts che prevede all'update del campo user_contacts.email l'aggiornamento della tabella users.

Ci sono incartamenti sul db, le relazioni
quando tento di crearle mi dice che
ci sono già, ma perché non le rilevo?

## Qui si continua a girare in tondo

Ok, mettere i sorgenti in regola con le regole.  
Ok, sistemare i Model  
Però qui si continua a fare il giro intorno a Contest
senza uscirne fuori. Mancava la relazione con i Circuit,
(peraltro tutta da realizzare)
Finiamo il giro dei refactor?
