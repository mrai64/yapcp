# Diario dello sviluppatore, data 21 novembre 2025

* [index](../index.md)
* [TDL](../TDL.md)
* [project](https://github.com/users/mrai64/projects/1)
_
* [Route](/routes/web.php)
_
* [◀️ ieri](./2025-11-20_IT.md)
* [log](/storage/logs/laravel.log)
* [MAMP base ↗️](http://127.0.0.1:8888/yapcp/public/)
_ [MAMP mysql ↗️](http://localhost:8888/phpMyAdmin5/index.php?route=/database/structure&db=pcpdb)
  bbedit ./storage/logs/laravel.log

## php 8.5

Sì, dopo l'annuncio di ieri OGGI è uscito php 8.5

## Laravel *Day After*

Ho acceso (per l'ultima volta? mai dire mai) MAMP, quello che avevo
maneggiato per aggiornamenti sia su mysql che su php che su phpMyAdmin
(in pratica 3 su 3 di quel che uso).

Sostituito da 3 app 3: server Herd, server dbngin, frontend sequel-ace.
Che adesso vanno messi in piedi, cominciando dal db.

Aperto sw, comando ` which mysqld `, risponde. Su Safari si cerca [create user mysql](https://dev.mysql.com/doc/refman/8.4/en/create-user.html),
trovato ed eseguito. Lezione gemini ai

```sql
CREATE USER 'nome_utente'@'localhost' IDENTIFIED BY 'password_sicura';
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE ON nome_database.* TO 'nome_utente'@'localhost';
FLUSH PRIVILEGES;
```

CREATE DATABASE IF NOT EXISTS pcpdb;
CREATE USER '\*\*\*\*\*\*\*\*\*\*'@'localhost' IDENTIFIED BY '\*\*\*\*\*\*\*\*\*\*';

Problema: mysql sta girando ma non si collega a mysql da terminale.
Trovato soluzione [qui](https://github.com/TablePlus/DBngin/issues/38),
di fatto DBngin gestisce più cose e non c'è IL sistema standard.
la connessione va fatta con un "comando completo".

```sh
mysql --socket /tmp/mysql_3306.sock -u root --port=3306
```

Questo lo rende un utente admin:

GRANT ALL ON pcpdb.* TO '\*\*\*\*\*\*\*\*\*\*'@'localhost';

E poi via via mi sono collegato al socket con root/root (TODO cambiare password di root con trunk branches leaves)

Verificato in Sequel ACE che le tabelle si caricano e con php artisan serve che
l'accesso funziona. Oddio, non è che vada sempre tutto bene, acchiappo qualche
errore... Però posso dare la colpa all'ambiente.

### caricamento relazioni ko

Ho aggiunto alle tabelle le relazioni con countries.id ma quando si crea
una relazione si verifica una congruenza tra le due colonne delle tabelle che non devono
avere valori discordanti, devono contenere insieme lo stesso set di dati.
Così è che la creazione della regola va a putt.. e se ne creo due in un colpo
può anche essere la seconda che va male.
Quante tabelle contengono user_id? parecchie, e la tabella user_contacts
contiene più user_id di quelli contenuti nella tabella users alla colonna users.id

### pulizia delle tabelle

Parecchi dei problemi che sto avendo adesso spero siano collegati
a un ambiente che si è sporcato. Servirebbe un
refresh del database, la creazione dei collegamenti a tabelle vuote e una
passata di creazione e caricamenti. Automatizzare.

* cancellazione dei record in user_contacts *il cui user_id non è presente in users.id*
* cancellazione dei record in user_roles (come sopra)
* cancellazione dei record in contest_works (come sopra)
