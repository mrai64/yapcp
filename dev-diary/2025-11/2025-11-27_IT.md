# Diario dello sviluppatore, data 27 novembre 2025

* [index](../index.md) |
  [To Do List](../TDL.md) da svuotare e migrare in |
  [project](https://github.com/users/mrai64/projects/1) issue list  

* [Route](/routes/web.php)  

* [‚óÄÔ∏è Diario di ieri](./2025-11-26_IT.md)

* <http://yapcp.test/>
* [log](/storage/logs/laravel-2025-11-27.log)  
_

## And the winner is...?

Pian coi sassi, oltre alla revisione dei voti con il giurato,
serve alla fine assegnare le opere ammesse. E poi assegnare
i premi tra le opere ammesse. E poi fare il verbale e poi fare le liste
da mandare alle federazioni. Concorso senza patemi.

### Ammissione (di massa)

UI: Pannello in cui all'organizzazione vengono proposti i voti
e quanti % di lavori da quel voto in su, compreso.
A fianco un pulsante che assegna ammissione, nella prima
versione andranno cliccati tutti uno a uno, oppure un click
valer per tutti i voti (somma dei voti) da quello compreso in su.

path: /organization/contest/admit/{sid} sono solo di sezione

[D n R 2](2025-11-27_gemini_say_2.md)  
Domanda a gemini su come metter in eloquent la query con subquery ...doppia.  
[Le query](./2025-11-27_IT_queries.sql)

### Assegnazione premi

A seguire l'assegnazione dei premi easy, si pu√≤ mettere l'immagine
in tabella con un campo option. La lista dei premi deve ridursi dinamicamente
man mano che i premi vengono assegnati e possono essere revocati
come nella prima versione dei voti con il campo input text.

path: /jury/contest/prize/section/{sid}  
path: /jury/contest/prize/contest/{sid}  
path: /jury/contest/prize/circuit/{sid}  

### Bozza di verbale

In data ... si sono riuniti le signore e i signori
<...>
per deliberare sul tema sezione <...>  
Hanno partecipavo <...> autori con <...> opere  
di cui sono state ammesse <...> opere di <...> autori.  
firma  
firma  
firma

Serve, anzi servono:  

* un verbale per ogni sezione e  
* un verbale per concorso e  
* un verbale per circuito

Valutare la creazione di pdf con intestazione in cui poi i
giurati, tramite passaggio del pdf via whatsapp
possano apporre ciascuno una firma

path /jury/contest/report/section/{sid}
path /jury/contest/report/contest/{sid}
path /jury/contest/report/circuit/{sid}

### Liste excel per le federazioni

Domanda a Gemini, si pu√≤ creare Excel (per le federazioni)?  
R.S√¨ [vedi risposta](2025-11-27_gemini_say.md)  
TODO : studiare [PHPOffice/PhpSpreadsheet](https://github.com/PHPOffice/PhpSpreadsheet)

E visto che c'√® scritto PHPOffice, oltre a excel si pu√≤ stampare un verbale
partendo da un template docx in word?  
TODO : studiare [PHPOffice/PHPWord](https://github.com/PHPOffice/PHPWord)  

## Ammissioni

```php
$ php artisan livewire:make Organization/Contest/SectionAdmission
 COMPONENT CREATED  ü§ô

CLASS: app/Livewire/Organization/Contest/SectionAdmission.php
VIEW:  resources/views/livewire/organization/contest/section-admission.blade.php
```

* in input il section_id via sid
* intestazione concorso
* accesso gates organization members only

per presentare l'elenco dei soli voti comprese le percentuali
mi devo ri-basare sulla lista di somme voti fatta per la definizione degli ammessi
e dei "galleggianti" a cui va cambiato il voto.

Esempio di output

| votes_sum |rank_voted_sum |percentuale |
| ---------: | --------------: | ------------:|
| 66 | 1 |  52 |
| 65 | 3 |  156 |
| 64 | 4 |  208 |
| 63 | 5 |  260 |
| 62 | 9 |  469 |
| 61 | 10 |  521 |
| 60 | 17 |  885 |
| 59 | 25 |  1302 |
| 58 | 42 |  2188 |
| 57 | 52 |  2708 |
| 56 | 62 |  3229 |
| 55 | 74 |  3854 |
| 54 | 87 |  4531 |
| 53 | 103 |  5365 |
| 52 | 111 |  5781 |
| 51 | 129 |  6719 |
| 50 | 147 |  7656 |
| 49 | 158 |  8229 |
| 48 | 171 |  8906 |
| 47 | 177 |  9219 |
| 46 | 182 |  9479 |
| 45 | 187 |  9740 |
| 44 | 190 |  9896 |
| 40 | 192 |  10000 |

Posto che il "miglior voto" per l'ammissione sia almeno 58 compreso,
andr√† posto o un flag da spuntare dal 66 voti fino al 58, oppure un solo
spunto per definire il voto.

Alla pressione del confirm s scatena la funzione che:

* riesegue la query che comprendi i work_id
* per tutti i work_id presenti con section_id e con work_id presenti in contest_works
  * resetta tutte le ammissioni assegnate (se non ce ne sono finisce subito,
  se ce ne fossero non vanno lasciate a far sporco)
* per tutti i lavori che hanno somma dei voti >= 58 assegna admit
