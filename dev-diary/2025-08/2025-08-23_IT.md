# Diario dello sviluppatore, Ep.20. data 23 agosto 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

## Le tabelle temporali

Una delle cose che mi porto dietro dal vecchio lavoro Ã¨ una gestione
delle tabelle il cui contenuto Ã¨ legato al calendario. Figlie dell'era
delle schede perforate, le *tabelle temporali* nel vecchio lavoro avevano
due colonne DSTA DEND, solo formato date iso *ccyy-mm-dd*, ed erano
**data compresa** ovvero se un periodo copriva dal 2025-01-01 al 2025-01-31
quello successivo partiva dal 2025-02-01 e non si sovrapponeva
mai a un altro periodo.

Una alternativa Ã¨ la realizzazione di tabelle con una sola data,
quindi valide *fino a scadenza* oppure *a partire dalla data*, in questo caso
si deve scegliere per una data *data* il record con la data scadenza
minima tra quelle che hanno scadenza >= alla data *data* per il sistema
*fino alla data*, oppure il record con la maggiore data *a partire da*
che che abbia una data <= alla data *data*.

yaPCP non sembra avere di queste necessitÃ , tuttavia
c'Ã¨ invece un campo in cui si possono applicare le clausole
di temporalitÃ . Quando vengono introdotte modifiche nei regolamento,
metti caso che *dal 1 gennaio 2026* venga accettato *oltre al formato jpg
anche il formato png e webp* la regola di validazione (che non sarÃ  rigida scritta nel sw ma una funzione) non puÃ² cambiare da subito o
solo a quel momento, serve che la regola si applichi fin da subito
**valida** per i concorsi **che sono in programma** ovvero si concludono
con la premiazione durante il 2026.

### A parte User, da chi cominciamo? Federation

SarÃ  una tabella padre ma non un elenco. ProprietÃ :

- `name`: denominazione della federazione, in inglese
- `code`: sigla con cui Ã¨ identificata
- `country_code`: codice paese,
  sarÃ  introdotto in un secondo momento quando si farÃ 
  a tabella country|Countries
- `website`: url del sito della federazione

Comandi

```text
php artisan make:livewire federation
...
CLASS: app/Livewire/Federation.php
VIEW:  resources/views/livewire/federation.blade.php
```

Risolto il problema del rendering del button,
passo a creare la tabella, la route, caricare la
tabella con un po' di dati a caso.

In route/web.php

```php
use App\Http\Livewire\Foundation 
...
Route::get('/federation', Federation::class);
```

Come da tutorial "prendo errore" e quindi creo quanto serve, un file `app.php` con

```php
php artisan livewire:layout
```

Nel file `app.php` devo mettere in head quello che ho in pagina welcome e nel body c'Ã¨ giÃ  lo $slot, magari posso aggiungere in seguito altro. header e footer.

La tabella l'ho creata? No, ho fatto la factory? No, ho fatto la seeder di una decina di record? E allora si fa.

```php
php artisan make:migration create_federations_table
php artisan make:model Federation
php artisan make:factory FederationFactory
php artisan make:seeder FederationSeeder
// modifica del file migration
// creazione tabella
php artisan migrate
// modifica del file model, 
// modifica del file factory
// modifica del file seeder
php artisan db:seed --class=FederationSeeder
// tutto bello ma mi crea tutte federazioni con code di 6 lettere, 
//  c'Ã¨ un trucco per farlo da 3 a 6? 
//  Str::limit( str, lth) con lth rand(3,6) 
//  SÃ¬, perÃ² mette al posto delle lettere qualcos'altro, rollback. Ci teniamo le 6.
```

Adesso che i dati ci sono, facciamo il componente per
elencare le federazioni `ShowFederationList`, oppure lo chiamo
`Federation/List`? Il primo ma poi si proverÃ  anche il secondo.

```php
php artisan livewire:make ShowFederationList
 COMPONENT CREATED  ðŸ¤™

CLASS: app/Livewire/ShowFederationList.php
VIEW:  resources/views/livewire/show-federation-list.blade.php
```

Alla fine si vede l'elenco, **commit**.
