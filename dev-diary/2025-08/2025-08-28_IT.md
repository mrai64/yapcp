# Diario dello sviluppatore, data 28 agosto 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

## Federations e FederationSections

La scheda della Federazione dovr√† anche avere al suo interno
le tabelle child, oppure con un pulsante passo dalla scheda
principale a una scheda dedicata. Se metto tutto in una scheda
sola sarebbe interessante usare i tabs

Federazione

Contatti / Sezioni / altro

```text
/federation/{fid}
/federation/section/list/{fid}
/federation/{fid}/section/list
/federation/section/{fid}/list
/federation/section/add/{fid}
/federation/section/modify/{sid} 
/federation/section/remove/{sid}
...
/federation-section/list/{fid}
/federation-section/add/{fid}
/federation-section/modify/{sid} 
/federation-section/remove/{sid}
```

Per√≤ forse le Federazioni hanno solo le sezioni come tabella child.

### FederationSections seeder

Visto che le federazioni hanno quasi tutte sigle diverse,
ma non escludo ci siano anche sigle sovrapponibili, ho scelto
di non usare la sigla della federazione come PK, ma questo comporta
che quando faccio i seeder sappia gi√† qual'√® l'id della federation.
Che viene assegnato. mettendo nel seeder in testa la funzione
`->truncate()` ottengo che viene svuotata e resettato il
contatore di autoincrement, in questo modo se FIAF √® la seconda riga
so che avr√† assegnato un `id == 2`.

### Enlarge and restrict columns

La federazione FIAF prevede che alle sigle gi√† indicate
si possa aggiungere la sigla TRAD, a indicare che il concorso
prevede immagini "tipo analogico" senza modifiche significative.
ieri era photoshop oggi √® la sintografia, c'√® sempre qualcuno
che guarda al vecchio come migliore.
Questo per√≤ mi procura che la colonna da 3 l'avevo gi√† piazzata a 5,
ma 5 basta solo per `/TRAD` e quindi devo andare almeno a 8.
La change per allargare la colonna √® facile e veloce, ma
teoricamente devo fare anche il rientro. Se il rientro comporta
un ritaglio dei dati la alter table non va. Serve quindi
inserire nella drop() prima una funzione di ritaglio dei dati,
e poi passare a cambiare la dimensione della colonna.
Esiste la funzione truncate() ma ha un uso di cancellazione e reset
sull'intera tabella.

## Federation/Section c**R**ud Listed

```php
php artisan livewire:make Federation/Section/Listed
 COMPONENT CREATED  ü§ô

CLASS: app/Livewire/Federation/Section/Listed.php
VIEW:  resources/views/livewire/federation/section/listed.blade.php
```

Uso all'interno la funzione `mount()` che dovrebbe precedere la funzione
`render()` come viene fatto nei controller di modify e remove.

web.php  

Funziona: **commit**

```php
$ php artisan livewire:make Federation/Section/Modify
 COMPONENT CREATED  ü§ô

CLASS: app/Livewire/Federation/Section/Modify.php
VIEW:  resources/views/livewire/federation/section/modify.blade.php
$ php artisan livewire:make Federation/Section/Add
 COMPONENT CREATED  ü§ô

CLASS: app/Livewire/Federation/Section/Add.php
VIEW:  resources/views/livewire/federation/section/add.blade.php
$ php artisan livewire:make Federation/Section/Remove
 COMPONENT CREATED  ü§ô

CLASS: app/Livewire/Federation/Section/Remove.php
VIEW:  resources/views/livewire/federation/section/remove.blade.php
```

La definition in Modify si perde per strada,
che fine fa? Che sia questione di nome? se invece che *definition* lo chiamo *extract*, lat:*excerptum*?

Fatto il refactory, **funziona**, non si danno nomi generici ai campi **definition** no.

Mannaggia la pupazza, ma possibile che sia cos√¨ difficile? No, soluzione facile. *errore: federation_id non ha un valore predefinito.* Ne ho provate tante ma niente. All'arrivo in mount() ho la federation_id di riferimento, che metto via in $this->federation_id. Cliccato Add New in $validate ci son tutti i campi meno federation_id, non c'√® verso di aggiungerlo nemmeno con campo hidden.  
E allora `dd($validated)` mi espone che in quella variable c'√® un semplice array, quindi √® facile fare l'aggiunta di ` $validate['federation_id] = $this_federation_id; ` con il dato che ho messo via in `mount(int fid)`.

**Risolto** e imparato, **commit**  

----

## Timezone Set

non voglio di entare scemo per le tabelle di elenchi, specie quando sono
 eramente elenchi e non serve fare tabelle. per l'elenco delle Timezone
ho untenzione di creare una classe App/Models/List/Timezone in cui definisco una const Set,
e un conponent livewire che crea un optionlist. oppure devo trovare come attivare
gli autocomplete nei campi text. intanto la verifica si pu√≤ fare con Rules::in()

