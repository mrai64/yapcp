# Diario dello sviluppatore, data 26 agosto 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

## Organizations CRUD / Create

Ieri fatto il lavoro di travaso, oggi pagina per aggiungere
una organization. C'√® il country_code, e non ho documentazione per la verifica
del campo di input oltre a quella standard. Dovrei testare che
il campo sia a) in un array per ora e b) quando sar√†,
che sia in tabella countries.

Pare che sia gestito usando la funzione rules(), in cui no serve solo
tornare un array associando i nomi dei campi alle stringhe di codifica attributi,
ma puntando a funzioni di convalida dentro cui ci star√†
quel che serve. [`Rules()`](https://livewire.laravel.com/docs/validation#defining-a-rules-method)  
Dubbio: il parametro di input da passare alla funzione che dovr√† avere un
\@param string e un \@return bool

```php
php artisan livewire:make Organization.Add
 COMPONENT CREATED  ü§ô

CLASS: app/Livewire/Organization/Add.php
VIEW:  resources/views/livewire/organization/add.blade.php
```

----

## **PAUSA**

Uno dei soggetti che offrono lavoro su Linkedin ha chiesto di Redis e ho scoperto che √® un sistema gestione dizionari chiave-valore **URCA|** Studiare subito.

### Redis √®_

Redis √® un sistema per memorizzare in modo "persistente" dati in forma di chiave valore. Caso base invece di helloworld si fa un contatore di visite. Anche se si apre una nuova finestra il contatore non si resetta. Di fatto √® considerato una alternativa a mySQL e MongoDB. Viene catalogato da [HTMl.it](https://html.it) come database NoSQL.

### Casa base [`https://redis.io/`](https://redis.io/)

[Docs](https://redis.io/docs/latest/)  
[Con PHP il client √® Predis](https://redis.io/docs/latest/develop/clients/php/)

[IONOS](https://www.ionos.it/digitalguide/hosting/tecniche-hosting/tutorial-su-redis/), che √® una azienda tetesca ma come Aruba, ne parla come di un mySQL in memoria e quindi dai tempi di risposta rapida, per√≤ specializzato in dizionari chiave-valore, pu√≤ avere senso per memorizzare per esempio l'elenco delle country, comunque dicono che se servono query complesse conviene "girare" su soluzioni pi√π tradizionali.

* `string` Stringhe  
Ha un significato ampliato, si possono anche inserire immagini, vengono memorizzate fino a 512MB per stringa
* Struttura dati
  * `list` liste
  * `set`  insiemi
  * `zset` insiemi ordinati
  * `hash` mappe hash

### `string`

Pu√≤ contenere dati lineari, immagazzinare info alfanumeriche (banalmente fa conto un base64 di una immagine), ma anche dati numerici (il contatore dell'esempio SeiIlVisitatoreN.) e si possono memorizzare fino a 512MB, compresa la manipolazione a bit. *binary safe*

### `list`

Quando metti in coda pi√π valori, quindi crei una sequenza di valori, fino a 32bit 4MLD di record. Accetta valori doppi al suo interno. Fino a 4MLD sono un sacco di record, meglio stare su numero pi√π limitati.

### `set`

Come le list ma non esiste un ordine e non ammette duplicati, e i tempi di
lettura o recupero di un dato non dipendono da quando √® stato inserito. Non vengono nominate chiavi/valore, √® come se la chiave fosse unica e il valore sia gestito come set.

### `zset`

Come i set ma a ogni elemento del set √® associato un campo scalare *score*, un float, che pu√≤ avere qualsiasi significato, e che quindi rende ordinabile l'insieme.

### `hash`

Qui la definizione √® ambigua, ovvero si parla di abbinamento di coppie chiave/valore ma da come viene scritta sembra che ci sia non una chiave ma una coppia di chiavi per ogni valore. In sospeso.

## `TYPE`, ovvero *che cosa ho in mano?*

```php
function TYPE( any ) : string {
  return 'string' | 'list' | 'set' | 'zset' | 'hash'
}
```

## `GET` / `SET`, il *leggi e scrivi* di base

`SET chiave valore`  
`OK`  
`GET chiave`  
`"valore"`  
`TYPE chiave`  
`string`

## Uno alla volta? Ma anche no: `MGET` `MSET`

```php
MSET chiave1 valore1 chiave2 "valore valore valore2" chiave3 valore3
GET chiave2
valore valore valore2
```

## Caaambio! `GETSET`

Imposta un nuovo valore e restituisce il valore precedente.

## Aggiungi se manca `SETNX`

return: 0 (= false) non ho inserito, c'era gi√† la chiave  
return: 1 (= true ) s√¨, ho inserito, la chiave non c'era

## Attaccati all'`APPEND`

## `GETRANGE off len` vai a leggere da posizione offset per lth (off parte da 0)

## `SETRANGE off len valore` vai a scrivere da posizione per lth

## Aggiungi 1, togli 1 `INCR chiave` `DECR chiave`

## Aggiungi N, togli N `INCRBY chiave N` `DECRBY chiave N`

## `SETBIT` mi spacca il ~~beat~~ bit (qualche volta serve)

`SETBIT parola off 1|0` imposta il bit (off parte da 0) a 1 oppure 0

## `GETBIT` a guard√† il ~~capello~~ bit

`GETBIT parola off` off parte da 0  
Se sul dato binario faccio `GET` mi esce il contenuto in esadecimale,
il valore 16 che in binario √® 00010000 esce "\x10"

## `BITPOS` per sapere il primo bit 1 o 0 dove sta

## `BITOP op res uno due` operazioni binarie bit a bit

* Op pu√≤ essere OR AND XOR
* res √® dove va il risultato
* uno, due sono in input

## tre tipi di lista

* lista posizionale, accesso in base alla posizione
* code FIFO il primo che arriva √® il primo che va
* pile LIFO l'ultimo che arriva √® il primo che va

`LPUSH chiave valore valore valore` mette gli elementi in testa alla lista  
`RPUSH chiave valore valore` mette gli elementi in coda alla lista  
`LPOP chiave` toglie un elemento in testa alla lista  
`RPOP chiave` toglie un elemento in coda alla lista  
Quindi LPUSH LPOP gestione FIFO (dalla testa)  
Quindi RPUSH RPOP gestione FIFO (dalla coda)  
Quindi LPUSH RPOP gestione LIFO (in un verso)  
Quindi RPUSH LPOP gestione LIFO (nell'altro verso)  

`LLEN` quanti sono nella lista  
`LPUSHX` come LPUSH ma solo se la lista esiste gi√†  
`RPUSHX` come RPUSH ma solo se la lista esiste gi√†  
`LINDEX chiave off` alla posizione off (comincia da zero) oppure (nil)  
`LRANGE chiave off n` n elementi a partire dalla posizione off (comincia da zero)  
`LSET chiave off valore`  sostituisce alla posizione off partendo dall'inizio  
`LSET chiave -off valore`  sostituisce alla posizione off partendo dal fondo  
`LINSERT chiave BEFORE|AFTER valore1 valore2` inserisce valore2 prima|dopo valore1 e il resto scala...
`LREM chiave quanti valore1` elimina quanti valore1 e il resto scala; ritorna il numero di elementi eliminati (da 0 in su)

*...Notato che i comandi delle liste cominciano con L?*  
S√¨, quelli con l'iniziale R prendono le liste per il didietro, e ci sta: REAR.

## Il set non ammette doppioni

Quindi non c'√® ordine, non c'√® primo ultimo FIFO LIFO, solo IN & OUT.  
`SADD`  
`SREM`  

`SISMEMBER` - c'√® o manca  
`SMEMBERS chiave` - l'elenco dei membri  
`SCARD chiave` - La cardinalit√†, quanti sono.  
`SDIFF chiave1 chiave2` - Quelli di chiave1 che mancano in chiave2.  
`SINTER chiave1 chiave2` - Quelli in comune.  
`SUNION chiave1 chiave2` - Tutti messi insieme.  

## `HASH` - Doppia chiave per il valore

Il dizionario o mappa in Redis diventa HASH, ovvero un insieme di
valori abbinati a una chiave e un secondo valore hash, che pu√≤ anche essere
una seconda o super-chiave, comune a un gruppo di dati.
L'esempio che viene fornito parte da un gruppo di voti di una pagella  

```php
HSET pagella Italiano 8
HSET pagella Matematica 5
HSET pagella Storia 5
HSET pagella Geografia 8
HSET pagella Inglese 7
HSET pagella inglese 7 <-- le schiavi sono case-sensitive 
^.   ^.      ^.      ^._valore 
 \.   \.      \._ chiave 
  \.   \_ hash
   \_ comando Hash SET 

HSETNX fa l\'inserimento solo se l\'elemento manca

HMSET pagella Italiano 8 Matematica 5 Storia 5 
Pi√π coppie valori dopo l\'hash

HGET pagella inglese
"7"

HLEN quante entry ci sono?
HEXISTS pagella italiano
0 (manca)
HEXISTS pagella Italiano
1 (c\'√®)

HKEYS elenco delle chiavi 
HVALS elenco dei valori 

HDEL hash chiave *cancella*

```

Si possono incrementare e decrementare valori nell'hash  
`HINCRBY` interi  
`HINCRBYFLOAT` float

----

## del 27 agosto

Domanda: preparo la scheda federazione e poi la sottoscheda sezioni che riassume i codici e i temi che i regolamenti concorsi delle rispettive federazioni prevedono, in questo modo per i bandi di concorso ci sar√† da selezionare i temi previsti in lista o aggiungere a testo libero nella compilazione del bando sulla piattaforma. Poi, √® questa la domanda, come f@ccio aggiungere i temi?  

- Potrei fare una lista di sezioni con il pulsante check a fianco, quelli che scelgo. Contro: a disposizione solo unoper sezione, che per√≤ √® la maggior parte dei concorsi, c'√® un solo Tema libero BN, non ce ne sono due. i temi a piacere avranno un codice progressivo previsto dai regolamenti (come in FIAF).
- Potrei fare una lista delle sezioni nel concorso e una da cui pescare a disposizione, affiancate sx/dx. Per aggiungere servirebbe un trascinamento oppure un pulsante ADD sulla lista delle sezioni disponibili e in caso di errore REM sulla lista delle sezioni gi√† aggiunte.