# Diario dello sviluppatore, Ep.19. data 22 agosto 2025

Nav: [index](../index.md) : [TDL](../TDL.md) : [log](../../storage/logs/laravel.log)

üü† TLTR;

## Continua la traduzione, l'inutile traduzione

Sto continuando la traduzione alla buona della libreria di messaggi usata da `__()`.
[qui](../../lang/it/validation.php) e sono centinaia. Laravel si sta dimostrando
pratico quanto una distro linux, ogni volta che cerchi qualche tutorial
non ne trovi due che parlino sullo stesso argomento della stessa soluzione.  
Prendo esempio dalla internazionalizzazione, uno dei suggerimenti del sito
installa i pacchetti lingua solo per l'inglese, senza date altre lingue.
In pi√π installa in `/lang`, e fin qui tutto bene, peccato che poi alla prima
ricerca trovi un package [Laravel Lang](https://github.com/Laravel-Lang)
che di fatto √® tutta un'altra cosa. Installa cartelle diverse e contenuti
diversi per fare la stessa cosa e ha in dote 127 lingue. Sarebbe da adottare subito,
ma il precedente lang non viene disinstallato, c'√® solo la funzione di `install` e
non quella di `remove`. E francamente tornare indietro √® una cosa che scoccia
se devo farla a mano ho sempre il pensiero che manchi una virgola.
Per√≤ git √® fatto per questo, si pu√≤ tornare a un commit precedente, creare un branch e
poi travasare da branch a branch quello che si vuole non perdere.

Intanto la traduzione sta ferma, seguo i

## Video tutorial [Livewire 3 from scratch](https://laracasts.com/series/livewire-3-from-scratch)

### 1. modifica welcome

In questa lezione sostanzialmente viene installato e modificata la pagina di benvenuto per mostrare come
con il comando  

```text
php artisan make:livewire saluto
````

vengono creare una classe Saluto e una view saluto.blade.php,  
nella classe si possono caricare e definire dei valori
che sono accessibili all'interno della view, e che  
la view √® di fatto solo un componente di codice html non una pagina completa. Per usare la parte nella pagina welcome
serve inserire un tag simil-html che √®  

```text
<livewire:saluto />
```

#### **versione app**  

La versione dell'app l'ho **per ora** piazzata all'interno della classe User, ma devo prevedere un diverso piazzamento, per ora sta l√†. Mi fa specie che un h1 sia ad altezza da corpo testo, generalmente sta molto di pi√π. Devo anche aggiungere un link "salta al contenuto principale" invisibile ma leggibile da screen reader per esercizio.

### 2. action

Le funzioni che vengono inserite nella classe possono essere richiamate all'interno delle view come fossero degli eventi ja, ma con una sintassi diversa.  

```text
üî¥ onclick="nomeDellaFunzione()"
üü¢ wire:click="nomeDellaFunzione()"
````

Come funziona la cosa: quando si clicca su un pulsante o si deve aggiornare qualcosa nella pagina parte una richiesta sempre uguale nella struttura in cui c'√® una chiamata e una risposta, e quello che torna indietro viene esposto. Non ci si deve inventare quello che c'√® gi√† a disposizione ma conoscere quello che c'√® gi√† a disposizione.
Le funzioni javascript sono gi√† in livewire. Spesso serve usare `wire:qualcosa`.

### 3. *Attaccarsi ~~al tram~~, al model* dal vivo

Usando `wire:model="user"`si possono avere a disposizione in diretta i dati dell'istanza della classe User `App\Models\User`. Questo risolve il problema di fare un js dedicato per ogni campo. Livewire abbina *by name* la view con il model.  
Per avere i dati sempre aggiornati, ad ogni evento nel browser, si pu√≤ usare `live`.  
Per non intasare la rete di chiamate si possono anche usare dei ritardi con il `debounce`

### 4. Mai, mai e poi mai fidarsi dell'input (validazione input)

Una delle cose che pu√≤ cambiare la vita √® fidarsi che l'utente non sia un hacker
che *ci prova* a ~~incula***~~. C'√® chi lo sa gi√† quanto fa male e chi lo sapr√†.
Per questo serve ovviamente un filtro che controlli ogni ogni ogni input
che arriva dal mondo *brutto sporco e cattivo*.

Metodi gi√† presenti e usabili:

- validate() di sistema
- rules() da definire nella Class perch√©  
se c'√® viene richiamata e deve tornare quello che si usa in validate()

```php
$this->validate([
  'nomedelcampo' => 'regola|regola|regola',
]);

// oppure creare la funzione pubblica regole()
public function rules()
{
  return [
  'nomedelcampo' => 'regola|regola|regola',
  ];
}
// e nel metodo chiamare senza input 
$this->validate();
```

Ma anche abbinare la regola di validazione al campo cui si applica, e a seguire fare la validazione. Certamente pi√π chiaro perch√© abbina regola e variabile a colpo d'occhio.

```php
#[Validate('required|min:2')]
public $name = ''; // obbligatorio e minimo 2 caratteri
// e nel metodo chiamare senza dati di input 
  $this->validate();
```

### 5. Prima di esporre il dato

Tra quando nella classe viene creato il dato con l'istanza
e quando viene esposto nella view c'√® spazio per fare alcune cose,
che vengono chiamati hooks, *ganci* ma forse suona meglio
chiodo, aggancio, ancoraggio o appiglio.  
Dovreste conoscere la *cura del chiodo.*

```text
mount()
```

Qui c'√® dove posso convertire l'elenco delle nazioni in un elenco di options.

```text
updated(property, value)
```

Qui c'√® quello che posso fare ogni volta che una property viene modificata.  
Non solo, se creo una public function updatedName(value) dove Name √® una delle
property, questa viene eseguita in automatico. L'esempio portato √® convertire tutto in minuscolo, ma si pu√≤ ipotizzare anche un altro uso.

### 6. Caccia al tesoro

Non si scrive solo per scrivere, poi serve leggere e di solito si cerca
il nome di un Mario Rossi nell'elenco telefonico di Milano M-Z.  
Sar√† anche che la fa semplice ma √® una figata, con 4 righe ha
impiantato una ricerca nella tabella Articoli riempita con due campi,
titolo e articolo. Cio√® la funzione, essendo abbinata al *gancio/hook* updatedSearchText della propriet√† searchtext della classe Search... Sono propro 4 righe 4:

```php
  $this->reset('results');
  $this->validate(); // regola piazzata sopra la propriet√†
  $searchTerm = "%{$value}%"; // doppi apici, non per caso
  $this->results = Article::where('title', 'LIKE', $searchTerm)->get();
```

```php
  // invia il modulo di ricerca anche se lo svuota 
  <button class="..."
    wire:click="clear()"
  >

  // Per evitare che il pulsante di reset invii il modulo
  <button class="..."
    wire:click.prevent="clear()"
  >
```

### 7. Componenti a tutta pagina + route

Per raggiungere un componente a tutta pagina serve inserire una route per quello.

Anche qui per l'aspetto del componente serve un copia incolla dalla pagina welcome. 

Per mostrare gli articoli si crea una classe MostraArticoli e un componente,
ma la parte interessante √® quella finale dove all'id dell'articolo viene sostituito proprio la classe articolo, di cui id √® una delle propriet√†

### 8. Intarsio di componenti

Nella pagina che mostra gli articoli si va a incastrare la barra
di ricerca, ottenendo anche man mano la gestione della visualizzazione
dei risultati, e in seguito anche la gestione del "0 result".
Per effetto della modalit√† *live* non si creano classi solo per le operazioni
CRUD sulle tabelle ma per ogni funzione necessaria, serve quindi una certa disciplina per nominare le strutture e qui c'√® il principio AzioneSoggetto.  
*Search* e *ShowSearch*, *Article* e *ShowArticle*, e cos√¨ via. Presumo ci saranno poi *AddArticle*, *EditArticle* ecc.
